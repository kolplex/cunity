!function(b){"function"==typeof define&&define.amd?define(["jquery","./blueimp-gallery"],b):b(window.jQuery,window.blueimp.Gallery)}(function(h,g){h.extend(g.prototype.options,{useBootstrapModal:!0});var l=g.prototype.close,k=g.prototype.imageFactory,j=g.prototype.videoFactory,i=g.prototype.textFactory;h.extend(g.prototype,{modalFactory:function(n,m,t,s){if(!this.options.useBootstrapModal||t){return s.call(this,n,m,t)}var r=this,q=this.container.children(".modal"),p=q.clone().show().on("click",function(b){(b.target===p[0]||b.target===p.children()[0])&&(b.preventDefault(),b.stopPropagation(),r.close())}),o=s.call(this,n,function(b){m({type:b.type,target:p[0]}),p.addClass("in")},t);return p.find(".modal-title").text(o.title||String.fromCharCode(160)),p.find(".modal-body").append(o),p[0]},imageFactory:function(e,d,f){return this.modalFactory(e,d,f,k)},videoFactory:function(e,d,f){return this.modalFactory(e,d,f,j)},textFactory:function(e,d,f){return this.modalFactory(e,d,f,i)},close:function(){this.container.find(".modal").removeClass("in"),l.call(this)}})});